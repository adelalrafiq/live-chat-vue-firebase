{"remainingRequest":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue","mtime":1611004224752},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBnZXRDb2xsZWN0aW9uIGZyb20gJy4uL2NvbXBvc2FibGVzL2dldENvbGxlY3Rpb24nCmltcG9ydCB7IGNvbXB1dGVkLCBvblVwZGF0ZWQsIHJlZiAgfSBmcm9tICd2dWUnCmltcG9ydCB7IGZvcm1hdERpc3RhbmNlVG9Ob3cgfSBmcm9tICdkYXRlLWZucycKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwKCkgewogICAgY29uc3QgeyBlcnJvciwgZG9jdW1lbnRzIH0gPSBnZXRDb2xsZWN0aW9uKCdtZXNzYWdlcycpCgogICAgLy8gZm9ybWF0IHRpbWVzdGFtcAogICAgY29uc3QgZm9ybWF0dGVkRG9jdW1lbnRzID0gY29tcHV0ZWQoKCkgPT4gewogICAgICByZXR1cm4gZG9jdW1lbnRzLnZhbHVlLm1hcChkb2MgPT4gewogICAgICAgIGxldCB0aW1lID0gZm9ybWF0RGlzdGFuY2VUb05vdyhkb2MuY3JlYXRlZEF0LnRvRGF0ZSgpKQogICAgICAgIHJldHVybiB7IC4uLmRvYywgY3JlYXRlZEF0OiB0aW1lIH0KICAgICAgfSkKICAgICAgaWYgKGRvY3VtZW50cy52YWx1ZSkgewogICAgICAgIHJldHVybiBkb2N1bWVudHMudmFsdWUubWFwKGRvYyA9PiB7CiAgICAgICAgICBsZXQgdGltZSA9IGZvcm1hdERpc3RhbmNlVG9Ob3coZG9jLmNyZWF0ZWRBdC50b0RhdGUoKSkKICAgICAgICAgIHJldHVybiB7IC4uLmRvYywgY3JlYXRlZEF0OiB0aW1lIH0KICAgICAgICB9KQogICAgICB9CiAgICB9KQogICAgIC8vIGF1dG8tc2Nyb2xsIHRvIGJvdHRvbSBvZiBtZXNzYWdlcwogICAgY29uc3QgbWVzc2FnZXMgPSByZWYobnVsbCkKICAgIG9uVXBkYXRlZCgoKSA9PiB7CiAgICAgIG1lc3NhZ2VzLnZhbHVlLnNjcm9sbFRvcCA9IG1lc3NhZ2VzLnZhbHVlLnNjcm9sbEhlaWdodAogICAgfSkKICAgIHJldHVybiB7IGVycm9yLCBkb2N1bWVudHMsIGZvcm1hdHRlZERvY3VtZW50cywgbWVzc2FnZXMgfQogIH0KfQo="},{"version":3,"sources":["/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue"],"names":[],"mappings":"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","file":"/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <!-- <div v-if=\"documents\" class=\"messages\"> -->\n    <div v-if=\"formattedDocuments\" ref=\"messages\" class=\"messages\">\n      <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n        <span class=\"created-at\">{{ doc.createdAt}}</span>\n        <span class=\"name\">{{ doc.name }}</span>\n        <span class=\"message\">{{ doc.message }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { computed, onUpdated, ref  } from 'vue'\nimport { formatDistanceToNow } from 'date-fns'\nexport default {\n  setup() {\n    const { error, documents } = getCollection('messages')\n\n    // format timestamp\n    const formattedDocuments = computed(() => {\n      return documents.value.map(doc => {\n        let time = formatDistanceToNow(doc.createdAt.toDate())\n        return { ...doc, createdAt: time }\n      })\n      if (documents.value) {\n        return documents.value.map(doc => {\n          let time = formatDistanceToNow(doc.createdAt.toDate())\n          return { ...doc, createdAt: time }\n        })\n      }\n    })\n     // auto-scroll to bottom of messages\n    const messages = ref(null)\n    onUpdated(() => {\n      messages.value.scrollTop = messages.value.scrollHeight\n    })\n    return { error, documents, formattedDocuments, messages }\n  }\n}\n</script>\n\n<style scoped>\n  .chat-window {\n    background: #fafafa;\n    padding: 30px 20px;\n  }\n  .single {\n    margin: 18px 0;\n  }\n  .created-at {\n    display: block;\n    color: #999;\n    font-size: 12px;\n    margin-bottom: 4px;\n  }\n  .name {\n    font-weight: bold;\n    margin-right: 6px;\n  }\n  .messages {\n    max-height: 400px;\n    overflow: auto;\n  }\n</style>"]}]}