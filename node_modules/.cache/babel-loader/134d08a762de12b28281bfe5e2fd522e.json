{"remainingRequest":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js!/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tengu/Documents/vue-firebase/live-chat/src/components/NewChatForm.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/tengu/Documents/vue-firebase/live-chat/src/components/NewChatForm.vue","mtime":1611001793282},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvdGVuZ3UvRG9jdW1lbnRzL3Z1ZS1maXJlYmFzZS9saXZlLWNoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgdXNlQ29sbGVjdGlvbiBmcm9tICcuLi9jb21wb3NhYmxlcy91c2VDb2xsZWN0aW9uJzsKaW1wb3J0IGdldFVzZXIgZnJvbSAnLi4vY29tcG9zYWJsZXMvZ2V0VXNlcic7CmltcG9ydCB7IHRpbWVzdGFtcCB9IGZyb20gJy4uL2ZpcmViYXNlL2NvbmZpZyc7CmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX2dldFVzZXIgPSBnZXRVc2VyKCksCiAgICAgICAgdXNlciA9IF9nZXRVc2VyLnVzZXI7CgogICAgdmFyIF91c2VDb2xsZWN0aW9uID0gdXNlQ29sbGVjdGlvbignbWVzc2FnZXMnKSwKICAgICAgICBhZGREb2MgPSBfdXNlQ29sbGVjdGlvbi5hZGREb2MsCiAgICAgICAgZXJyb3IgPSBfdXNlQ29sbGVjdGlvbi5lcnJvcjsgLy8gcmVmcwoKCiAgICB2YXIgbWVzc2FnZSA9IHJlZignJyk7CgogICAgdmFyIGhhbmRsZVN1Ym1pdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjaGF0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNoYXQgPSB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIudmFsdWUuZGlzcGxheU5hbWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UudmFsdWUsCiAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAvKiBjb25zb2xlLmxvZyhjaGF0KQogICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9ICcnICovCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYWRkRG9jKGNoYXQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICBoYW5kbGVTdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgZXJyb3I6IGVycm9yCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/home/tengu/Documents/vue-firebase/live-chat/src/components/NewChatForm.vue"],"names":[],"mappings":";;AAYA,OAAO,aAAP,MAA0B,8BAA1B;AACA,OAAO,OAAP,MAAoB,wBAApB;AACA,SAAS,SAAT,QAA0B,oBAA1B;AACA,SAAS,GAAT,QAAoB,KAApB;AACA,eAAe;AACb,EAAA,KADa,mBACL;AAAA,mBACW,OAAO,EADlB;AAAA,QACE,IADF,YACE,IADF;;AAAA,yBAEoB,aAAa,CAAC,UAAD,CAFjC;AAAA,QAEE,MAFF,kBAEE,MAFF;AAAA,QAEU,KAFV,kBAEU,KAFV,EAIN;;;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,EAAD,CAAnB;;AACA,QAAM,YAAW;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,gBAAA,IADa,GACN;AACX,kBAAA,IAAI,EAAE,IAAI,CAAC,KAAL,CAAW,WADN;AAEX,kBAAA,OAAO,EAAE,OAAO,CAAC,KAFN;AAGX,kBAAA,SAAS,EAAE,SAAS;AAHT,iBADM;AAMnB;AACA;;AAPmB;AAAA,uBAQb,MAAM,CAAC,IAAD,CARO;;AAAA;AASnB,oBAAI,CAAC,KAAK,CAAC,KAAX,EAAkB;AAChB,kBAAA,OAAO,CAAC,KAAR,GAAgB,EAAhB;AACF;;AAXmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAX,YAAW;AAAA;AAAA;AAAA,OAAjB;;AAaA,WAAO;AAAE,MAAA,OAAO,EAAP,OAAF;AAAW,MAAA,YAAY,EAAZ,YAAX;AAAyB,MAAA,KAAI,EAAJ;AAAzB,KAAP;AACF;AArBa,CAAf","sourcesContent":["<template>\n  <form>\n    <textarea\n      placeholder=\"Type a message and hit enter to send...\" \n      v-model=\"message\"\n      @keypress.enter.prevent=\"handleSubmit\">\n    </textarea>\n    <div v-if=\"error\" class=\"error\">{{ error }} blah</div>\n  </form>\n</template>\n\n<script>\nimport useCollection from '../composables/useCollection'\nimport getUser from '../composables/getUser'\nimport { timestamp } from '../firebase/config'\nimport { ref } from 'vue'\nexport default {\n  setup() {\n    const { user } = getUser()\n    const { addDoc, error } = useCollection('messages')\n\n    // refs\n    const message = ref('')\n    const handleSubmit = async () => {\n      const chat = {\n        name: user.value.displayName,\n        message: message.value,\n        createdAt: timestamp()\n      }\n      /* console.log(chat)\n      message.value = '' */\n      await addDoc(chat)\n      if (!error.value) {\n        message.value = ''\n      }\n    }\n    return { message, handleSubmit, error }\n  }\n}\n</script>\n\n<style scoped>\n  form {\n    margin: 10px;\n  }\n  textarea {\n    width: 100%;\n    max-width: 100%;\n    margin-bottom: 6px;\n    padding: 10px;\n    box-sizing: border-box;\n    border: 0;\n    border-radius: 20px;\n    font-family: inherit;\n    outline: none;\n  }\n  .error {\n    text-align: center;\n    color: #ff2a58;\n    font-size: 12px;\n    padding: 10px 0;\n  }\n</style> "],"sourceRoot":""}]}