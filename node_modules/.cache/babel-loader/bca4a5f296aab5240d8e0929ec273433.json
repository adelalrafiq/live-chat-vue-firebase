{"remainingRequest":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js!/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue?vue&type=template&id=3af19f98&scoped=true","dependencies":[{"path":"/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue","mtime":1611004224752},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTNhZjE5Zjk4Iik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi0zYWYxOWY5OCIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJjaGF0LXdpbmRvdyIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAga2V5OiAwCn07CnZhciBfaG9pc3RlZF8zID0gewogIGtleTogMSwKICByZWY6ICJtZXNzYWdlcyIsCiAgY2xhc3M6ICJtZXNzYWdlcyIKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJjcmVhdGVkLWF0Igp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogIm5hbWUiCn07CnZhciBfaG9pc3RlZF82ID0gewogIGNsYXNzOiAibWVzc2FnZSIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFskc2V0dXAuZXJyb3IgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzIsIF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLmVycm9yKSwgMQogIC8qIFRFWFQgKi8KICApKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKSwgX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIDxkaXYgdi1pZj1cImRvY3VtZW50c1wiIGNsYXNzPVwibWVzc2FnZXNcIj4gIiksICRzZXR1cC5mb3JtYXR0ZWREb2N1bWVudHMgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzMsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJHNldHVwLmZvcm1hdHRlZERvY3VtZW50cywgZnVuY3Rpb24gKGRvYykgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICAgIGtleTogZG9jLmlkLAogICAgICBjbGFzczogInNpbmdsZSIKICAgIH0sIFtfY3JlYXRlVk5vZGUoInNwYW4iLCBfaG9pc3RlZF80LCBfdG9EaXNwbGF5U3RyaW5nKGRvYy5jcmVhdGVkQXQpLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlVk5vZGUoInNwYW4iLCBfaG9pc3RlZF81LCBfdG9EaXNwbGF5U3RyaW5nKGRvYy5uYW1lKSwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZVZOb2RlKCJzcGFuIiwgX2hvaXN0ZWRfNiwgX3RvRGlzcGxheVN0cmluZyhkb2MubWVzc2FnZSksIDEKICAgIC8qIFRFWFQgKi8KICAgICldKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0sIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pOwp9KTs="},{"version":3,"sources":["/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue"],"names":[],"mappings":";;;;;;;;AACO,EAAA,KAAK,EAAC;;;;;;;AAGsB,EAAA,GAAG,EAAC,U;AAAW,EAAA,KAAK,EAAC;;;AAE1C,EAAA,KAAK,EAAC;;;AACN,EAAA,KAAK,EAAC;;;AACN,EAAA,KAAK,EAAC;;;;;;uBAPlB,YAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATO,MAAA,CAAA,K,kBAAX,YAAA,CAAmC,KAAnC,EAAmC,UAAnC,EAAmC,gBAAA,CAAd,MAAA,CAAA,KAAc,CAAnC,EAA0B;AAAA;AAA1B,G,qCASI,EARJ,mBAAA,CAAA,+CAAA,CAQI,EAPO,MAAA,CAAA,kB,kBAAX,YAAA,CAMM,KANN,EAAA,UAAA,EAMM,E,kBALJ,YAAA,CAIM,SAJN,EAIM,IAJN,EAIM,WAAA,CAJa,MAAA,CAAA,kBAIb,EAJ+B,UAAzB,GAAyB,EAAtB;yBAAf,YAAA,CAIM,KAJN,EAIM;AAJkC,MAAA,GAAG,EAAE,GAAG,CAAC,EAI3C;AAJ+C,MAAA,KAAK,EAAC;AAIrD,KAJN,E,CACE,YAAA,CAAkD,MAAlD,EAAA,UAAA,EAAkD,gBAAA,CAAtB,GAAG,CAAC,SAAkB,CAAlD,EAAyC;AAAA;AAAzC,K,EACA,YAAA,CAAwC,MAAxC,EAAA,UAAA,EAAwC,gBAAA,CAAlB,GAAG,CAAC,IAAc,CAAxC,EAA8B;AAAA;AAA9B,K,EACA,YAAA,CAA8C,MAA9C,EAAA,UAAA,EAA8C,gBAAA,CAArB,GAAG,CAAC,OAAiB,CAA9C,EAAoC;AAAA;AAApC,K,CAHF,C;GAIM,CAJN,E;;AAAA,GAKI,EANN,E;;AAAA,G,qCAOI,CAVN,C","sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <!-- <div v-if=\"documents\" class=\"messages\"> -->\n    <div v-if=\"formattedDocuments\" ref=\"messages\" class=\"messages\">\n      <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n        <span class=\"created-at\">{{ doc.createdAt}}</span>\n        <span class=\"name\">{{ doc.name }}</span>\n        <span class=\"message\">{{ doc.message }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { computed, onUpdated, ref  } from 'vue'\nimport { formatDistanceToNow } from 'date-fns'\nexport default {\n  setup() {\n    const { error, documents } = getCollection('messages')\n\n    // format timestamp\n    const formattedDocuments = computed(() => {\n      return documents.value.map(doc => {\n        let time = formatDistanceToNow(doc.createdAt.toDate())\n        return { ...doc, createdAt: time }\n      })\n      if (documents.value) {\n        return documents.value.map(doc => {\n          let time = formatDistanceToNow(doc.createdAt.toDate())\n          return { ...doc, createdAt: time }\n        })\n      }\n    })\n     // auto-scroll to bottom of messages\n    const messages = ref(null)\n    onUpdated(() => {\n      messages.value.scrollTop = messages.value.scrollHeight\n    })\n    return { error, documents, formattedDocuments, messages }\n  }\n}\n</script>\n\n<style scoped>\n  .chat-window {\n    background: #fafafa;\n    padding: 30px 20px;\n  }\n  .single {\n    margin: 18px 0;\n  }\n  .created-at {\n    display: block;\n    color: #999;\n    font-size: 12px;\n    margin-bottom: 4px;\n  }\n  .name {\n    font-weight: bold;\n    margin-right: 6px;\n  }\n  .messages {\n    max-height: 400px;\n    overflow: auto;\n  }\n</style>"],"sourceRoot":""}]}