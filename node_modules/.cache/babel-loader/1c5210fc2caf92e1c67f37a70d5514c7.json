{"remainingRequest":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/thread-loader/dist/cjs.js!/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js!/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue","mtime":1611005696627},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tengu/Documents/vue-firebase/live-chat/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdGVuZ3UvRG9jdW1lbnRzL3Z1ZS1maXJlYmFzZS9saXZlLWNoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgZ2V0Q29sbGVjdGlvbiBmcm9tICcuLi9jb21wb3NhYmxlcy9nZXRDb2xsZWN0aW9uJzsKaW1wb3J0IHsgY29tcHV0ZWQsIG9uVXBkYXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2VUb05vdyB9IGZyb20gJ2RhdGUtZm5zJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBfZ2V0Q29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb24oJ21lc3NhZ2VzJyksCiAgICAgICAgZXJyb3IgPSBfZ2V0Q29sbGVjdGlvbi5lcnJvciwKICAgICAgICBkb2N1bWVudHMgPSBfZ2V0Q29sbGVjdGlvbi5kb2N1bWVudHM7IC8vIGZvcm1hdCB0aW1lc3RhbXAKCgogICAgdmFyIGZvcm1hdHRlZERvY3VtZW50cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRvY3VtZW50cy52YWx1ZSkgewogICAgICAgIHJldHVybiBkb2N1bWVudHMudmFsdWUubWFwKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgIHZhciB0aW1lID0gZm9ybWF0RGlzdGFuY2VUb05vdyhkb2MuY3JlYXRlZEF0LnRvRGF0ZSgpKTsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRvYyksIHt9LCB7CiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGltZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOyAvLyBhdXRvLXNjcm9sbCB0byBib3R0b20gb2YgbWVzc2FnZXMKCiAgICB2YXIgbWVzc2FnZXMgPSByZWYobnVsbCk7CiAgICBvblVwZGF0ZWQoZnVuY3Rpb24gKCkgewogICAgICBtZXNzYWdlcy52YWx1ZS5zY3JvbGxUb3AgPSBtZXNzYWdlcy52YWx1ZS5zY3JvbGxIZWlnaHQ7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGVycm9yOiBlcnJvciwKICAgICAgZG9jdW1lbnRzOiBkb2N1bWVudHMsCiAgICAgIGZvcm1hdHRlZERvY3VtZW50czogZm9ybWF0dGVkRG9jdW1lbnRzLAogICAgICBtZXNzYWdlczogbWVzc2FnZXMKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/home/tengu/Documents/vue-firebase/live-chat/src/components/ChatWindow.vue"],"names":[],"mappings":";;AAcA,OAAO,aAAP,MAA0B,8BAA1B;AACA,SAAS,QAAT,EAAmB,SAAnB,EAA8B,GAA9B,QAAyC,KAAzC;AACA,SAAS,mBAAT,QAAoC,UAApC;AACA,eAAe;AACb,EAAA,KADa,mBACL;AAAA,yBACuB,aAAa,CAAC,UAAD,CADpC;AAAA,QACE,KADF,kBACE,KADF;AAAA,QACS,SADT,kBACS,SADT,EAEN;;;AACA,QAAM,kBAAiB,GAAI,QAAQ,CAAC,YAAM;AACxC,UAAI,SAAS,CAAC,KAAd,EAAqB;AACnB,eAAO,SAAS,CAAC,KAAV,CAAgB,GAAhB,CAAoB,UAAA,GAAE,EAAK;AAChC,cAAI,IAAG,GAAI,mBAAmB,CAAC,GAAG,CAAC,SAAJ,CAAc,MAAd,EAAD,CAA9B;AACA,iDAAY,GAAZ;AAAiB,YAAA,SAAS,EAAE;AAA5B;AACD,SAHM,CAAP;AAIF;AACD,KAPkC,CAAnC,CAHM,CAWN;;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,IAAD,CAApB;AACA,IAAA,SAAS,CAAC,YAAM;AACd,MAAA,QAAQ,CAAC,KAAT,CAAe,SAAf,GAA2B,QAAQ,CAAC,KAAT,CAAe,YAA1C;AACD,KAFQ,CAAT;AAGA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,SAAS,EAAT,SAAT;AAAoB,MAAA,kBAAkB,EAAlB,kBAApB;AAAwC,MAAA,QAAO,EAAP;AAAxC,KAAP;AACF;AAlBa,CAAf","sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <div v-if=\"formattedDocuments\" ref=\"messages\" class=\"messages\">\n      <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n        <span class=\"created-at\">{{ doc.createdAt }}</span>\n        <span class=\"name\">{{ doc.name }}</span>\n        <span class=\"message\">{{ doc.message }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { computed, onUpdated, ref } from 'vue'\nimport { formatDistanceToNow } from 'date-fns'\nexport default {\n  setup() {\n    const { error, documents } = getCollection('messages')\n    // format timestamp\n    const formattedDocuments = computed(() => {\n      if (documents.value) {\n        return documents.value.map(doc => {\n          let time = formatDistanceToNow(doc.createdAt.toDate())\n          return { ...doc, createdAt: time }\n        })\n      }\n    })\n    // auto-scroll to bottom of messages\n    const messages = ref(null)\n    onUpdated(() => {\n      messages.value.scrollTop = messages.value.scrollHeight\n    })\n    return { error, documents, formattedDocuments, messages }\n  }\n}\n</script>\n\n<style scoped>\n  .chat-window {\n    background: #fafafa;\n    padding: 30px 20px;\n  }\n  .single {\n    margin: 18px 0;\n  }\n  .created-at {\n    display: block;\n    color: #999;\n    font-size: 12px;\n    margin-bottom: 4px;\n  }\n  .name {\n    font-weight: bold;\n    margin-right: 6px;\n  }\n  .messages {\n    max-height: 400px;\n    overflow: auto;\n  }\n</style>"],"sourceRoot":""}]}